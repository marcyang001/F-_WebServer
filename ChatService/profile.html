<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>User identification</title>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.min.js"></script>
        <script type="text/javascript">

            function refresh(name) {
                console.log(name)
                $.ajax({
                    type: "GET", url: "/directchat", dataType: "text",
                    success: function (data) {
                        //$("#output").html(data);
                        console.log(data)
                        document.write(data)
                        $("#name").html(name)
                        //var div = document.getElementById('name');
                        //div.innerHTML = name + ": "
                        
                    }
                });
            };

            function send() {
                var name = $("#textBox").val()
                $.ajax({
                    type: "POST", url: "/post",
                    dataType: "text",
                    data: $("#textBox").val() + " has logged in",
                    success: refresh(name)
                });
            }

            function runScript(e) {
                if (e.keyCode == 13) {
                    send();

                }
                return false;
            }

        </script>
    </head>

    <body>
            
        <div id="output"></div>   

        <h1>Please enter your name </h1>


        <div id="input">
            <input type="text" id="textBox" onkeypress="runScript(event)"/>
            <button onclick="send();">Send</button>
        </div>


    </body>


</html>

        </script>